# Admin Domain Model - EvolvAI

Este documento describe en profundidad el modelo de dominio del paquete `admin.model` del proyecto EvolvAI. Su objetivo
es ayudar a nuevos integrantes del equipo a comprender la estructura de clases, relaciones entre entidades y su
finalidad dentro del contexto del sistema.

---

## ‚ú® Prop√≥sito del modelo `admin`

El modelo `admin` representa la estructura organizativa, los usuarios, sus roles, las personas (f√≠sicas y jur√≠dicas) y
la configuraci√≥n para el uso personalizado de la inteligencia artificial (IA) dentro del sistema EvolvAI.

---

## üì¶ Scripts de inicializaci√≥n

Para facilitar la instalaci√≥n y pruebas del modelo, se incluyen los siguientes scripts:

* üõ†Ô∏è [init\_adm\_tables.sql](../scripts/init_adm_tables.sql): Crea todas las tablas necesarias del esquema `admin`.
* üß™ [insert\_data.sql](../scripts/insert_data.sql): Inserta datos sint√©ticos √∫tiles para pruebas y validaciones
  iniciales.

Pod√©s encontrarlos en el directorio `/scripts` del repositorio o cargarlos en tu instancia local de PostgreSQL.

---

## üìò Diagrama de Clases UML

![Diagrama de clases](./class.png)

> El diagrama completo est√° disponible en `/docs/uml/admin-class-diagram.puml`.

---

## üìã Entidades principales

### `Person` (abstracta)

* Superclase de todas las personas del sistema.
* Atributos:

    * `UUID id`
    * `String displayName`

### `NaturalPerson`

* Representa personas f√≠sicas (individuos reales).
* Atributos:

    * `firstName`, `lastName`, `nationalId`, `birthDate`
    * Relacionada con varias `Area` mediante `AreaAssignment`.

**Ejemplo**:

```json
{
  "firstName": "Fabi√°n",
  "lastName": "Ag√ºero",
  "displayName": "Fabi√°n Ag√ºero",
  "nationalId": "12345678",
  "birthDate": "1985-06-15"
}
```

### `LegalPerson`

* Representa entidades legales (empresas u organizaciones).
* Subclase de `Person`.
* Atributos:

    * `businessName`, `taxId`, `registrationNumber`

### `Organization`

* Subclase de `LegalPerson`.
* Se vincula con una o m√°s `Area`.

### `Area`

* Unidad organizativa dentro de una `Organization`.
* Asociada a:

    * Una organizaci√≥n.
    * M√∫ltiples `AreaAssignment`.
    * M√∫ltiples `Role`.

### `AreaAssignment`

* Relaci√≥n entre `NaturalPerson` y `Area`.
* Atributos:

    * `assignedAt`, `localRole`

**Ejemplo**:

```json
{
  "person": "Fabi√°n Ag√ºero",
  "area": "AI Research",
  "assignedAt": "2023-01-10",
  "localRole": "Lead"
}
```

### `Role`

* Define un rol dentro de un √°rea organizativa.
* Asociado a usuarios del sistema.

### `User`

* Entidad que representa al usuario del sistema (login/autenticaci√≥n).
* Asociado a:

    * `Role` funcional.
    * `NaturalPerson` que lo representa.
* Atributos:

    * `email`, `password`, `active`

---

## ü§ñ Inferencia personalizada

### `InferenceConfiguration`

* Define configuraciones espec√≠ficas de inferencia por contexto:

    * `contextType`: `USER`, `AREA`, `ORGANIZATION`
    * `contextId`: referencia a la entidad destino
    * `aiRole`: rol de la IA en el contexto (`ASSISTANT`, `AUDITOR`, etc.)
* Asociada a:

    * Una lista de `Prompt`
    * Una lista de `EmbeddingSource`

### `EmbeddingSource`

* Define documentos o fuentes que nutren la IA.
* Atributos:

    * `name`, `description`, `path`

**Ejemplo**:

```json
{
  "name": "AI Whitepaper",
  "description": "Documentaci√≥n b√°sica para resumen",
  "path": "/docs/ai.pdf"
}
```

---

## üîé Prompts estructurados

### `Prompt`

* Contenedor de uno o varios mensajes.
* Atributos:

    * `title`, `description`, `version`

### `PromptMessage`

* Define un mensaje dentro de un `Prompt`, con rol sem√°ntico:

    * `SYSTEM`, `USER`, `ASSISTANT`
* Asociado a un `Prompt`.

**Ejemplo**:

```json
{
  "role": "SYSTEM",
  "content": "You are a helpful assistant."
}
```

---

## üìä Diagrama ERD (relacional)

![ERD](./erd.png)

> Archivo fuente: `/docs/uml/admin-erd.puml`

---

## üîê Consideraciones finales

* Este modelo est√° 100% alineado con LangChain4j.
* Permite la personalizaci√≥n de prompts y embeddings por organizaci√≥n, √°rea y usuario.
* Est√° preparado para escalar jer√°rquicamente.
* La modularidad permite reutilizaci√≥n en otros contextos del sistema.

---

‚úâ Si sos nuevo en el equipo y ten√©s dudas sobre este modelo, pod√©s hablar con el autor original o consultar los ejemplos
en `/docs/examples/admin-model`.
